(function(e,t,n,r){function o(r){if(!n[r]){if(!t[r]){if(e)return e(r);throw Error("Cannot find module '"+r+"'")}var i=n[r]={exports:{}};t[r][0](function(e){var n=t[r][1][e];return o(n?n:e)},i,i.exports)}return n[r].exports}for(var i=0;r.length>i;i++)o(r[i]);return o})("undefined"!=typeof require&&require,{1:[function(e,t){var n,r,o,i,s,u=[].indexOf||function(e){for(var t=0,n=this.length;n>t;t++)if(t in this&&this[t]===e)return t;return-1};s=e("../lib/lodash.js"),i=e("./helpers"),r=e("./context"),o={},o.render=function(e,t,n,u){var a,l;return null==t&&(t=[]),null==n&&(n={}),null==u&&(u={}),a=u.debug&&console?i.consoleLogger:i.nullLogger,a("Transparency.render:",e,t,n,u),e?(s.isArray(t)||(t=[t]),e=(l=i.data(e)).context||(l.context=new r(e,o)),e.render(t,n,u).el):void 0},o.matcher=function(e,t){return e.el.id===t||u.call(e.classNames,t)>=0||e.el.name===t||e.el.getAttribute("data-bind")===t},o.clone=function(e){return n(e).clone()[0]},o.jQueryPlugin=i.chainable(function(e,t,n){var r,i,s,u;for(u=[],i=0,s=this.length;s>i;i++)r=this[i],u.push(o.render(r,e,t,n));return u}),("undefined"!=typeof jQuery&&null!==jQuery||"undefined"!=typeof Zepto&&null!==Zepto)&&(n=jQuery||Zepto,null!=n&&(n.fn.render=o.jQueryPlugin)),(t!==void 0&&null!==t?t.exports:void 0)&&(t.exports=o),"undefined"!=typeof window&&null!==window&&(window.Transparency=o),("undefined"!=typeof define&&null!==define?define.amd:void 0)&&define(function(){return o})},{"../lib/lodash.js":2,"./helpers":3,"./context":4}],2:[function(e,t,n){(function(e){(function(r){function o(){}function i(e,t,n){if(null==e)return w;var r=typeof e;if("function"!=r){if("object"!=r)return function(t){return t[e]};var o=ht(e);return function(t){for(var n=o.length,r=!1;n--&&(r=d(t[o[n]],e[o[n]],O)););return r}}return t!==undefined?1===n?function(n){return e.call(t,n)}:2===n?function(n,r){return e.call(t,n,r)}:4===n?function(n,r,o,i){return e.call(t,n,r,o,i)}:function(n,r,o){return e.call(t,n,r,o)}:e}function s(){for(var e,t={hasDontEnumBug:F,hasEnumPrototype:I,isKeysFast:G,nonEnumArgs:J,noCharByIndex:et,shadowed:k,arrays:"isArray(iterable)",bottom:"",loop:"",top:"",useHas:!0},n=0;e=arguments[n];n++)for(var r in e)t[r]=e[r];var o=t.args;t.firstArg=/^[^,]+/.exec(o)[0];var s=Function("createCallback, hasOwnProperty, isArguments, isArray, isString, objectTypes, nativeKeys","return function("+o+") {\n"+ot(t)+"\n}");return s(i,D,l,ct,v,rt,B)}function u(e){return"function"!=typeof e.toString&&"string"==typeof(e+"")}function a(e,t,n){t||(t=0),n===undefined&&(n=e?e.length:0);for(var r=-1,o=n-t||0,i=Array(0>o?0:o);o>++r;)i[r]=e[t+r];return i}function l(e){return S.call(e)==M}function c(e){var t=[];return lt(e,function(e,n){t.push(n)}),t}function h(e){return e===!0||e===!1||S.call(e)==Q}function f(e){return e instanceof Date||S.call(e)==q}function p(e){return e?1===e.nodeType:!1}function d(e,t,n,r,o,s){var a=n===O;if(n&&!a){n=r===undefined?n:i(n,r,2);var c=n(e,t);if(c!==undefined)return!!c}if(e===t)return 0!==e||1/e==1/t;var h=typeof e,f=typeof t;if(e===e&&(!e||"function"!=h&&"object"!=h)&&(!t||"function"!=f&&"object"!=f))return!1;if(null==e||null==t)return e===t;var p=S.call(e),m=S.call(t);if(p==M&&(p=$),m==M&&(m=$),p!=m)return!1;switch(p){case Q:case q:return+e==+t;case K:return e!=+e?t!=+t:0==e?1/e==1/t:e==+t;case R:case X:return e==t+""}var g=p==H;if(!g){if(e.__wrapped__||t.__wrapped__)return d(e.__wrapped__||e,t.__wrapped__||t,n,r,o,s);if(p!=$||tt&&(u(e)||u(t)))return!1;var v=!U&&l(e)?Object:e.constructor,b=!U&&l(t)?Object:t.constructor;if(v!=b&&!(y(v)&&v instanceof v&&y(b)&&b instanceof b))return!1}o||(o=[]),s||(s=[]);for(var x=o.length;x--;)if(o[x]==e)return s[x]==t;var _=0;if(c=!0,o.push(e),s.push(t),g){if(x=e.length,_=t.length,c=_==e.length,!c&&!a)return c;for(;_--;){var E=x,w=t[_];if(a)for(;E--&&!(c=d(e[E],w,n,r,o,s)););else if(!(c=d(e[_],w,n,r,o,s)))break}return c}return at(t,function(t,i,u){return D.call(u,i)?(_++,c=D.call(e,i)&&d(e[i],t,n,r,o,s)):undefined}),c&&!a&&at(e,function(e,t,n){return D.call(n,t)?c=--_>-1:undefined}),c}function y(e){return"function"==typeof e}function m(e){return e?rt[typeof e]:!1}function g(e){return"number"==typeof e||S.call(e)==K}function v(e){return"string"==typeof e||S.call(e)==X}function b(e){for(var t=-1,n=ht(e),r=n.length,o=Array(r);r>++t;)o[t]=e[n[t]];return o}function x(e,t,n){var r=[];if(t=i(t,n),ct(e))for(var o=-1,s=e.length;s>++o;){var u=e[o];t(u,o,e)&&r.push(u)}else ut(e,function(e,n,o){t(e,n,o)&&r.push(e)});return r}function _(e,t,n){var r=-1,o=e?e.length:0,s=Array("number"==typeof o?o:0);if(t=i(t,n),ct(e))for(;o>++r;)s[r]=t(e[r],r,e);else ut(e,function(e,n,o){s[++r]=t(e,n,o)});return s}function E(e){return e&&"number"==typeof e.length?et&&v(e)?e.split(""):a(e):b(e)}function w(e){return e}var j="object"==typeof n&&n,A="object"==typeof t&&t&&t.exports==j&&t,N="object"==typeof e&&e;N.global===N&&(r=N);var T=[],C={},O=C;r._;var P=RegExp("^"+(C.valueOf+"").replace(/[.*+?^${}()|[\]\\]/g,"\\$&").replace(/valueOf|for [^\]]+/g,".+?")+"$"),k=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"],D=(Math.ceil,T.concat,Math.floor,C.hasOwnProperty),S=(T.push,C.toString),L=P.test(L=a.bind)&&L,V=P.test(V=Array.isArray)&&V,B=(r.isFinite,r.isNaN,P.test(B=Object.keys)&&B);Math.max,Math.min,Math.random;var F,I,M="[object Arguments]",H="[object Array]",Q="[object Boolean]",q="[object Date]",Z="[object Function]",K="[object Number]",$="[object Object]",R="[object RegExp]",X="[object String]",W=!!r.attachEvent,z=L&&!/\n|true/.test(L+W),G=B&&(W||z),J=!0;(function(){function e(){this.x=1}var t=[];e.prototype={valueOf:1,y:1};for(var n in new e)t.push(n);for(n in arguments)J=!n;F=!/valueOf/.test(t),I=e.propertyIsEnumerable("prototype")})(1);var U=arguments.constructor==Object,Y=!l(arguments),et="xx"!="x"[0]+Object("x")[0];try{var tt=S.call(document)==$&&!({toString:0}+"")}catch(nt){}var rt={"boolean":!1,"function":!0,object:!0,number:!1,string:!1,undefined:!1},ot=function(e){var t="var index, iterable = "+e.firstArg+", result = iterable;\nif (!iterable) return result;\n"+e.top+";\n";if(e.arrays?(t+="var length = iterable.length; index = -1;\nif ("+e.arrays+") {  ",e.noCharByIndex&&(t+="\n  if (isString(iterable)) {\n    iterable = iterable.split('')\n  }  "),t+="\n  while (++index < length) {\n    "+e.loop+"\n  }\n}\nelse {  "):e.nonEnumArgs&&(t+="\n  var length = iterable.length; index = -1;\n  if (length && isArguments(iterable)) {\n    while (++index < length) {\n      index += '';\n      "+e.loop+"\n    }\n  } else {  "),e.hasEnumPrototype&&(t+="\n  var skipProto = typeof iterable == 'function';\n  "),e.isKeysFast&&e.useHas?(t+="\n  var ownIndex = -1,\n      ownProps = objectTypes[typeof iterable] ? nativeKeys(iterable) : [],\n      length = ownProps.length;\n\n  while (++ownIndex < length) {\n    index = ownProps[ownIndex];\n    ",e.hasEnumPrototype&&(t+="if (!(skipProto && index == 'prototype')) {\n  "),t+=e.loop+"",e.hasEnumPrototype&&(t+="}\n"),t+="  }  "):(t+="\n  for (index in iterable) {",(e.hasEnumPrototype||e.useHas)&&(t+="\n    if (",e.hasEnumPrototype&&(t+="!(skipProto && index == 'prototype')"),e.hasEnumPrototype&&e.useHas&&(t+=" && "),e.useHas&&(t+="hasOwnProperty.call(iterable, index)"),t+=") {    "),t+=e.loop+";    ",(e.hasEnumPrototype||e.useHas)&&(t+="\n    }"),t+="\n  }  "),e.hasDontEnumBug){t+="\n\n  var ctor = iterable.constructor;\n    ";for(var n=0;7>n;n++)t+="\n  index = '"+e.shadowed[n]+"';\n  if (","constructor"==e.shadowed[n]&&(t+="!(ctor && ctor.prototype === iterable) && "),t+="hasOwnProperty.call(iterable, index)) {\n    "+e.loop+"\n  }    "}return(e.arrays||e.nonEnumArgs)&&(t+="\n}"),t+=e.bottom+";\nreturn result"},it={args:"collection, callback, thisArg",top:"callback = callback && typeof thisArg == 'undefined' ? callback : createCallback(callback, thisArg)",arrays:"typeof length == 'number'",loop:"if (callback(iterable[index], index, collection) === false) return result"},st={top:"if (!objectTypes[typeof iterable]) return result;\n"+it.top,arrays:!1},ut=s(it);Y&&(l=function(e){return e?D.call(e,"callee"):!1});var at=s(it,st,{useHas:!1}),lt=s(it,st),ct=V||function(e){return U&&e instanceof Array||S.call(e)==H},ht=B?function(e){return m(e)?I&&"function"==typeof e||J&&e.length&&l(e)?c(e):B(e):[]}:c;y(/x/)&&(y=function(e){return e instanceof Function||S.call(e)==Z}),z&&A&&"function"==typeof setImmediate&&(defer=bind(setImmediate,r)),o.filter=x,o.forIn=at,o.forOwn=lt,o.keys=ht,o.map=_,o.toArray=E,o.values=b,o.collect=_,o.select=x,o.identity=w,o.isArguments=l,o.isArray=ct,o.isBoolean=h,o.isDate=f,o.isElement=p,o.isEqual=d,o.isFunction=y,o.isNumber=g,o.isObject=m,o.isString=v,o.VERSION="1.0.1",j&&A&&((A.exports=o)._=o)})(this)})(window)},{}],3:[function(e,t,n){var r,o,i,s;r=e("./elementFactory"),n.before=function(e){return function(t){return function(){return e.apply(this,arguments),t.apply(this,arguments)}}},n.after=function(e){return function(t){return function(){return t.apply(this,arguments),e.apply(this,arguments)}}},n.chainable=n.after(function(){return this}),n.onlyWith$=function(e){return"undefined"!=typeof jQuery&&null!==jQuery||"undefined"!=typeof Zepto&&null!==Zepto?function(){return e(arguments)}(jQuery||Zepto):void 0},n.getElements=function(e){var t;return t=[],s(e,t),t},s=function(e,t){var o,i;for(o=e.firstChild,i=[];o;)o.nodeType===n.ELEMENT_NODE&&(t.push(new r.createElement(o)),s(o,t)),i.push(o=o.nextSibling);return i},n.ELEMENT_NODE=1,n.TEXT_NODE=3,i=function(){return"<:nav></:nav>"!==document.createElement("nav").cloneNode(!0).outerHTML},n.cloneNode="undefined"==typeof document||null===document||i()?function(e){return e.cloneNode(!0)}:function(e){var t,r,i,s,u;if(t=Transparency.clone(e),t.nodeType===n.ELEMENT_NODE)for(t.removeAttribute(o),u=t.getElementsByTagName("*"),i=0,s=u.length;s>i;i++)r=u[i],r.removeAttribute(o);return t},o="transparency",n.data=function(e){return e[o]||(e[o]={})},n.nullLogger=function(){},n.consoleLogger=function(){return console.log(arguments)},n.log=n.nullLogger},{"./elementFactory":5}],4:[function(e,t){var n,r,o,i,s,u,a;a=e("./helpers"),i=a.before,o=a.after,s=a.chainable,u=a.cloneNode,r=e("./instance"),t.exports=n=function(){function e(e,t){this.el=e,this.Transparency=t,this.template=u(this.el),this.instances=[new r(this.el,this.Transparency)],this.instanceCache=[]}var t,n;return n=s(function(){return this.parent=this.el.parentNode,this.parent?(this.nextSibling=this.el.nextSibling,this.parent.removeChild(this.el)):void 0}),t=s(function(){return this.parent?this.nextSibling?this.parent.insertBefore(this.el,this.nextSibling):this.parent.appendChild(this.el):void 0}),e.prototype.render=i(n)(o(t)(s(function(e,t,n){for(var o,i,s,a,l,c,h;e.length<this.instances.length;)this.instanceCache.push(this.instances.pop().remove());for(;e.length>this.instances.length;)s=this.instanceCache.pop()||new r(u(this.template),this.Transparency),this.instances.push(s.appendTo(this.el));for(h=[],i=l=0,c=e.length;c>l;i=++l)a=e[i],s=this.instances[i],o=[],h.push(s.prepare(a,o).renderValues(a,o).renderDirectives(a,i,t).renderChildren(a,o,t,n));return h}))),e}()},{"./helpers":3,"./instance":6}],5:[function(e,t){var n,r,o,i,s,u,a,l,c,h,f,p,d,y,m,g,v={}.hasOwnProperty,b=function(e,t){function n(){this.constructor=e}for(var r in t)v.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e};f=e("../lib/lodash.js"),h=e("./helpers"),n=e("./attributeFactory"),t.exports=i={Elements:{input:{}},createElement:function(e){var t,n;return t="input"===(n=e.nodeName.toLowerCase())?i.Elements[n][e.type.toLowerCase()]||s:i.Elements[n]||o,new t(e)}},o=function(){function e(e){this.el=e,this.attributes={},this.childNodes=f.toArray(this.el.childNodes),this.nodeName=this.el.nodeName.toLowerCase(),this.classNames=this.el.className.split(" "),this.originalAttributes={}}return e.prototype.empty=function(){for(var e;e=this.el.firstChild;)this.el.removeChild(e);return this},e.prototype.reset=function(){var e,t,n,r;n=this.attributes,r=[];for(t in n)e=n[t],r.push(e.set(e.templateValue));return r},e.prototype.render=function(e){return this.attr("text",e)},e.prototype.attr=function(e,t){var r,o;return r=(o=this.attributes)[e]||(o[e]=n.createAttribute(this.el,e,t)),null!=t&&r.set(t),r},e.prototype.renderDirectives=function(e,t,n){var r,o,i,s;s=[];for(o in n)v.call(n,o)&&(r=n[o],"function"==typeof r&&(i=r.call(e,{element:this.el,index:t,value:this.attr(o).templateValue}),null!=i?s.push(this.attr(o,i)):s.push(void 0)));return s},e}(),a=function(e){function t(e){t.__super__.constructor.call(this,e),this.elements=h.getElements(e)}return b(t,e),i.Elements.select=t,t.prototype.render=function(e){var t,n,r,o,i;for(e=""+e,o=this.elements,i=[],n=0,r=o.length;r>n;n++)t=o[n],"option"===t.nodeName&&i.push(t.attr("selected",t.el.value===e));return i},t}(o),c=function(e){function t(){return p=t.__super__.constructor.apply(this,arguments)}var n,r,o,s;for(b(t,e),n=["area","base","br","col","command","embed","hr","img","input","keygen","link","meta","param","source","track","wbr"],o=0,s=n.length;s>o;o++)r=n[o],i.Elements[r]=t;return t.prototype.attr=function(e,n){return"text"!==e&&"html"!==e?t.__super__.attr.call(this,e,n):void 0},t}(o),s=function(e){function t(){return d=t.__super__.constructor.apply(this,arguments)}return b(t,e),t.prototype.render=function(e){return this.attr("value",e)},t}(c),l=function(e){function t(){return y=t.__super__.constructor.apply(this,arguments)}return b(t,e),i.Elements.textarea=t,t}(s),r=function(e){function t(){return m=t.__super__.constructor.apply(this,arguments)}return b(t,e),i.Elements.input.checkbox=t,t.prototype.render=function(e){return this.attr("checked",Boolean(e))},t}(s),u=function(e){function t(){return g=t.__super__.constructor.apply(this,arguments)}return b(t,e),i.Elements.input.radio=t,t}(r)},{"../lib/lodash.js":2,"./helpers":3,"./attributeFactory":7}],6:[function(e,t){var n,r,o,i,s={}.hasOwnProperty;i=e("../lib/lodash.js"),r=(o=e("./helpers")).chainable,t.exports=n=function(){function e(e,t){this.Transparency=t,this.queryCache={},this.childNodes=i.toArray(e.childNodes),this.elements=o.getElements(e)}return e.prototype.remove=r(function(){var e,t,n,r,o;for(r=this.childNodes,o=[],t=0,n=r.length;n>t;t++)e=r[t],o.push(e.parentNode.removeChild(e));return o}),e.prototype.appendTo=r(function(e){var t,n,r,o,i;for(o=this.childNodes,i=[],n=0,r=o.length;r>n;n++)t=o[n],i.push(e.appendChild(t));return i}),e.prototype.prepare=r(function(e){var t,n,r,i,s;for(i=this.elements,s=[],n=0,r=i.length;r>n;n++)t=i[n],t.reset(),s.push(o.data(t.el).model=e);return s}),e.prototype.renderValues=r(function(e,t){var n,r,o,u;if(i.isElement(e)&&(n=this.elements[0]))return n.empty().el.appendChild(e);if("object"==typeof e){u=[];for(r in e)s.call(e,r)&&(o=e[r],null!=o&&(i.isString(o)||i.isNumber(o)||i.isBoolean(o)||i.isDate(o)?u.push(function(){var e,t,i,s;for(i=this.matchingElements(r),s=[],e=0,t=i.length;t>e;e++)n=i[e],s.push(n.render(o));return s}.call(this)):"object"==typeof o?u.push(t.push(r)):u.push(void 0)));return u}}),e.prototype.renderDirectives=r(function(e,t,n){var r,o,i,u;u=[];for(i in n)s.call(n,i)&&(r=n[i],"object"==typeof r&&("object"!=typeof e&&(e={value:e}),u.push(function(){var n,s,u,a;for(u=this.matchingElements(i),a=[],n=0,s=u.length;s>n;n++)o=u[n],a.push(o.renderDirectives(e,t,r));return a}.call(this))));return u}),e.prototype.renderChildren=r(function(e,t,n,r){var o,i,s,u,a;for(a=[],s=0,u=t.length;u>s;s++)i=t[s],a.push(function(){var t,s,u,a;for(u=this.matchingElements(i),a=[],t=0,s=u.length;s>t;t++)o=u[t],a.push(this.Transparency.render(o.el,e[i],n[i],r));return a}.call(this));return a}),e.prototype.matchingElements=function(e){var t,n,r;return n=(r=this.queryCache)[e]||(r[e]=function(){var n,r,o,i;for(o=this.elements,i=[],n=0,r=o.length;r>n;n++)t=o[n],this.Transparency.matcher(t,e)&&i.push(t);return i}.call(this)),o.log("Matching elements for '"+e+"':",n),n},e}()},{"../lib/lodash.js":2,"./helpers":3}],7:[function(e,t){var n,r,o,i,s,u,a,l,c={}.hasOwnProperty,h=function(e,t){function n(){this.constructor=e}for(var r in t)c.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e};l=e("../lib/lodash"),a=e("./helpers"),t.exports=r={Attributes:{},createAttribute:function(e,t){var o;return o=r.Attributes[t]||n,new o(e,t)}},n=function(){function e(e,t){this.el=e,this.name=t,this.templateValue=this.el.getAttribute(this.name)||""}return e.prototype.set=function(e){return this.el[this.name]=e,this.el.setAttribute(this.name,""+e)},e}(),o=function(e){function t(e,t){this.el=e,this.name=t,this.templateValue=this.el.getAttribute(this.name)||!1}var n,o,i,s;for(h(t,e),n=["hidden","async","defer","autofocus","formnovalidate","disabled","autofocus","formnovalidate","multiple","readonly","required","checked","scoped","reversed","selected","loop","muted","autoplay","controls","seamless","default","ismap","novalidate","open","typemustmatch","truespeed"],i=0,s=n.length;s>i;i++)o=n[i],r.Attributes[o]=t;return t.prototype.set=function(e){return this.el[this.name]=e,e?this.el.setAttribute(this.name,this.name):this.el.removeAttribute(this.name)},t}(n),u=function(e){function t(e,t){var n;this.el=e,this.name=t,this.templateValue=function(){var e,t,r,o;for(r=this.el.childNodes,o=[],e=0,t=r.length;t>e;e++)n=r[e],n.nodeType===a.TEXT_NODE&&o.push(n.nodeValue);return o}.call(this).join(""),this.children=l.toArray(this.el.children),(this.textNode=this.el.firstChild)?this.textNode.nodeType!==a.TEXT_NODE&&(this.textNode=this.el.insertBefore(this.el.ownerDocument.createTextNode(""),this.textNode)):this.el.appendChild(this.textNode=this.el.ownerDocument.createTextNode(""))}return h(t,e),r.Attributes.text=t,t.prototype.set=function(e){for(var t,n,r,o,i;t=this.el.firstChild;)this.el.removeChild(t);for(this.textNode.nodeValue=e,this.el.appendChild(this.textNode),o=this.children,i=[],n=0,r=o.length;r>n;n++)t=o[n],i.push(this.el.appendChild(t));return i},t}(n),s=function(e){function t(e){this.el=e,this.templateValue="",this.children=l.toArray(this.el.children)}return h(t,e),r.Attributes.html=t,t.prototype.set=function(e){for(var t,n,r,o,i;t=this.el.firstChild;)this.el.removeChild(t);for(this.el.innerHTML=e+this.templateValue,o=this.children,i=[],n=0,r=o.length;r>n;n++)t=o[n],i.push(this.el.appendChild(t));return i},t}(n),i=function(e){function t(e){t.__super__.constructor.call(this,e,"class")}return h(t,e),r.Attributes["class"]=t,t}(n)},{"../lib/lodash":2,"./helpers":3}]},{},[1]);